<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ASOBLEなきごえはんと</title>
  <style>
    body {
      font-family: "Arial", sans-serif;
      background-color: #fff8f0;
      margin: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #d94f4f;
      margin-bottom: 30px;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .button {
      padding: 10px 16px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background-color: #f0c040;
      color: #333;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .button:hover, .button.active {
      background-color: #f08a24;
      color: #fff;
    }
    .controls {
      text-align: center;
      margin: 20px 0;
    }
    audio {
      width: 90%;
      max-width: 400px;
      margin: 10px auto;
    }
    .display-area {
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      margin-top: 20px;
    }
    .photo {
      max-width: 100%;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    @media (max-width: 600px) {
      .button {
        font-size: 16px;
        padding: 8px 12px;
      }
    }
  </style>
</head>
<body>

  <h1>ASOBLEなきごえはんと</h1>

  <div class="container" id="buttonContainer"></div>

  <div class="controls">
    <audio id="audioPlayer" controls></audio><br>
    <button id="replayButton" class="button" style="display:none;">もういちどきく</button>
    <button id="showAnswer" class="button" style="display:none;">こたえをみる</button>
  </div>

  <div class="display-area" id="displayArea"></div>

  <script>
    const BASE_URL = location.pathname.replace(/\/$/, "");

    const buttonContainer = document.getElementById("buttonContainer");
    const audioPlayer = document.getElementById("audioPlayer");
    const displayArea = document.getElementById("displayArea");
    const showAnswer = document.getElementById("showAnswer");
    const replayButton = document.getElementById("replayButton");

    const fileMap = {
      "01": "01_ロバ.mp3", "02": "02_コオロギ.mp3", "03": "03_カバ.mp3", "04": "04_ミサゴ.mp3", "05": "05_カモメ.mp3",
      "06": "06_リス.mp3", "07": "07_バッタ.mp3", "08": "08_キツネ.mp3", "09": "09_カエル.mp3", "10": "10_ヘラジカ.mp3",
      "11": "11_ハト.mp3", "12": "12_マネシツグミ.mp3", "13": "13_クジャク.mp3", "14": "14_フィンチ.mp3", "15": "15_フラミンゴ.mp3",
      "16": "16_カラス.mp3", "17": "17_カナリア.mp3", "18": "18_フクロウ.mp3", "19": "19_スズメ.mp3", "20": "20_ハチ.mp3",
      "21": "21_ネコ.mp3", "22": "22_モンキー.mp3", "23": "23_ペンギン.mp3", "24": "24_アカオウム.mp3", "25": "25_ヒツジ.mp3",
      "26": "26_ウマ.mp3", "27": "27_アヒル.mp3", "28": "28_ネコ.mp3", "29": "29_ウシ.mp3", "30": "30_ニワトリ.mp3",
      "31": "31_ブラッドハウンド.mp3", "32": "32_ヤギ.mp3", "33": "33_ブタ.mp3", "34": "34_カンガルー.mp3", "35": "35_コヨーテ.mp3",
      "36": "36_バッファロー.mp3", "37": "37_ホッキョクグマ.mp3", "38": "38_ピューマ.mp3", "39": "39_トラ.mp3", "40": "40_チンパンジー.mp3",
      "41": "41_ワニ.mp3", "42": "42_ゴリラ.mp3", "43": "43_コブラ.mp3", "44": "44_ヒョウ.mp3", "45": "45_ゾウ.mp3",
      "46": "46_バイソン.mp3", "47": "47_オオカミ.mp3", "48": "48_ハゲワシ.mp3", "49": "49_ガラガラヘビ.mp3", "50": "50_サイ.mp3"
    };

    let currentNumber = null;

    for (let i = 1; i <= 50; i++) {
      const numStr = i.toString().padStart(2, '0');
      const button = document.createElement("button");
      button.textContent = numStr;
      button.className = "button";
      button.addEventListener("click", () => {
        document.querySelectorAll(".button").forEach(btn => btn.classList.remove("active"));
        button.classList.add("active");

        currentNumber = numStr;

        const audioFile = fileMap[numStr];
        const audioPath = `${BASE_URL}/音声/${encodeURIComponent(audioFile)}`;
        audioPlayer.src = audioPath;
        audioPlayer.play();

        showAnswer.style.display = "none";
        replayButton.style.display = "none";
        displayArea.innerHTML = "";
      });
      buttonContainer.appendChild(button);
    }

    audioPlayer.onended = () => {
      showAnswer.style.display = "inline-block";
      replayButton.style.display = "inline-block";
    };

    showAnswer.addEventListener("click", () => {
      if (currentNumber) {
        const imagePath = `${BASE_URL}/動物の画像/${encodeURIComponent(currentNumber)}.jpg`;
        const img = document.createElement("img");
        img.src = imagePath;
        img.alt = `${currentNumber}番の動物の写真`;
        img.className = "photo";
        displayArea.innerHTML = "";
        displayArea.appendChild(img);
      }
    });

    replayButton.addEventListener("click", () => {
      if (audioPlayer.src) {
        audioPlayer.currentTime = 0;
        audioPlayer.play();
      }
    });
  </script>
</body>
</html>
